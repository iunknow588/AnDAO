# 本地开发服务器指南

## 快速启动

### 方法一：使用启动脚本（推荐）

```bash
cd /home/lc/luckee_dao/AnDaoWallet/h5
./scripts/start-local-dev.sh
```

### 方法二：直接使用 npm 命令

```bash
cd /home/lc/luckee_dao/AnDaoWallet/h5

# 首次运行需要安装依赖
npm install

# 启动开发服务器
npm run dev
```

## 访问地址

开发服务器启动后，可以通过以下地址访问：

- **本地访问**: http://localhost:3000
- **网络访问**: http://192.168.170.27:3000（局域网内其他设备可访问）

## 测试服务器状态

运行测试脚本检查服务器是否正常运行：

```bash
./scripts/test-local-dev.sh
```

测试脚本会检查：
- ✅ 服务器是否运行（HTTP 200）
- ✅ 页面标题是否正确
- ✅ React 根元素是否存在
- ✅ 入口文件引用是否正确
- ✅ 资源文件是否可访问

## 功能特性

### 热模块替换 (HMR)

- 修改代码后自动刷新页面
- 保持应用状态，无需手动刷新
- 快速反馈，提升开发效率

### 开发工具

- **React DevTools**: 安装浏览器扩展进行组件调试
- **MobX DevTools**: 通过 mobx-devtools 调试状态管理
- **Chrome DevTools**: 使用浏览器开发者工具进行调试

## 停止服务器

在运行开发服务器的终端中按 `Ctrl+C` 停止服务器。

## 常见问题

### Q1: 端口 3000 已被占用

**解决方案**:
1. 修改 `vite.config.ts` 中的端口号：
   ```typescript
   server: {
     port: 3001, // 或其他可用端口
   }
   ```
2. 或使用环境变量：
   ```bash
   PORT=3001 npm run dev
   ```

### Q2: 依赖安装失败

**解决方案**:
```bash
# 清除缓存后重新安装
rm -rf node_modules package-lock.json
npm install
```

### Q3: 页面无法访问

**检查项**:
1. 确认服务器是否正在运行（检查进程）
2. 确认防火墙是否允许端口访问
3. 检查浏览器控制台是否有错误

### Q4: 热更新不工作

**解决方案**:
1. 检查文件是否在 `src/` 目录下
2. 确认文件扩展名正确（`.tsx`, `.ts`, `.jsx`, `.js`）
3. 重启开发服务器

## 开发工作流

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **在浏览器中打开**
   - 访问 http://localhost:3000
   - 打开浏览器开发者工具（F12）

3. **修改代码**
   - 编辑 `src/` 目录下的文件
   - 保存后自动刷新

4. **查看日志**
   - 浏览器控制台：查看前端日志
   - 终端：查看构建日志和错误信息

5. **停止服务器**
   - 按 `Ctrl+C` 停止

## 相关脚本

- `scripts/start-local-dev.sh` - 启动开发服务器脚本
- `scripts/test-local-dev.sh` - 测试服务器状态脚本
- `deploy/check-deployment.sh` - 部署前检查脚本
- `deploy/deploy-vercel.sh` - Vercel 部署脚本

## 下一步

本地开发服务器运行正常后，可以：

1. **测试功能**: 在浏览器中测试钱包的各项功能
2. **开发新功能**: 修改代码并实时查看效果
3. **调试问题**: 使用浏览器开发者工具调试
4. **准备部署**: 功能测试完成后，可以部署到 Vercel

---

**文档版本**: v1.0  
**最后更新**: 2026-01-13
